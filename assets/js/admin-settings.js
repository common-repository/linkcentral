/*! For license information please see admin-settings.js.LICENSE.txt */
(()=>{var n;(n=jQuery)(document).ready((function(){function e(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(".nav-tab-wrapper a").removeClass("nav-tab-active"),n('.nav-tab-wrapper a[href="#'+e+'"]').addClass("nav-tab-active"),n(".tab-content").hide(),n("#"+e).show(),n("#active_tab").val(e),a&&history.pushState(null,"","#"+e)}function a(){var a=window.location.hash.substring(1);a&&n("#"+a).length?e(a):e(n("#active_tab").val()||"general")}function i(){var e=n("#linkcentral_disable_reporting").is(":checked");["#linkcentral_track_ip","#linkcentral_track_user_agent","#linkcentral_track_unique_visitors","#linkcentral_excluded_ips",'input[name="linkcentral_excluded_roles[]"]',"#linkcentral_exclude_bots","#linkcentral_enable_ga","#linkcentral_ga_measurement_id","#linkcentral_ga_api_secret"].forEach((function(a){n(a).prop("disabled",e)})),["#linkcentral_track_ip","#linkcentral_track_user_agent","#linkcentral_track_unique_visitors","#linkcentral_excluded_ips",'input[name="linkcentral_excluded_roles[]"]',"#linkcentral_exclude_bots","#linkcentral_enable_ga"].forEach((function(a){n(a).closest("tr, div").css("opacity",e?.4:1)}))}function t(){var e=n("#linkcentral_url_prefix_select").val();"custom"===e&&(e=n("#linkcentral_url_prefix").val()),n("#prefix-example").text(e)}function l(e,a){var i=n(e).closest("tr");a?i.show():i.hide()}function c(e,a){var i=n(e).siblings(".linkcentral-configure-link"),t=i.data("toggle-rows");a?i.show():(i.hide().removeClass("active"),l(t,!1))}function r(){var e=n("#linkcentral_geolocation_service").val();n("#cloudflare-status").toggle("cloudflare"===e),n("#maxmind-status").toggle("maxmind"===e),n('.linkcentral-configure-link[data-target="maxmind"]').toggle("maxmind"===e),"maxmind"===e&&(n("#linkcentral_maxmind_license_key").val()||n("#maxmind-status").html('<span class="dashicons dashicons-warning error"></span> Please enter a MaxMind license key.').show())}n(".nav-tab-wrapper a").on("click",(function(a){a.preventDefault(),e(n(this).attr("href").substring(1),!0)})),a(),n(window).on("popstate",a),n('a[href^="#"]').on("click",(function(a){var i=n(this).attr("href").substring(1);n("#"+i).length&&(a.preventDefault(),e(i,!0))})),i(),n("#linkcentral_disable_reporting").on("change",i),n("#linkcentral_url_prefix_select").on("change",t),n("#linkcentral_url_prefix").on("input",t),t(),n("#linkcentral_url_prefix_select").on("change",(function(){"custom"===n(this).val()?n("#linkcentral_url_prefix").show().focus():n("#linkcentral_url_prefix").hide().val(n(this).val())})),"custom"===n("#linkcentral_url_prefix_select").val()&&n("#linkcentral_url_prefix").show(),n('input[name="linkcentral_enable_data_expiry"]').on("change",(function(){n('select[name="linkcentral_data_expiry_days"]').prop("disabled",!n(this).is(":checked"))})),n(".linkcentral-accordion-header").click((function(){n(this).toggleClass("active"),n(this).next(".linkcentral-accordion-content").slideToggle()})),n("select").each((function(){var e=n(this),a=e.siblings(".linkcentral-configure-link");a.length&&(e.on("change",(function(){c(this,n(this).val()===a.data("target"))})),e.trigger("change"))})),n('input[type="checkbox"]').each((function(){var e=n(this);e.siblings(".linkcentral-configure-link").length&&(e.on("change",(function(){c(this,n(this).is(":checked"))})),e.trigger("change"))})),n(".linkcentral-configure-link").on("click",(function(e){e.preventDefault();var a=n(this).data("toggle-rows");n(this).toggleClass("active"),l(a,n(this).hasClass("active"))})),n("#linkcentral_geolocation_service").on("change",r),r(),n("#linkcentral_verify_maxmind_license").on("click",(function(){var e=n(this),a=e.text(),i=n("#linkcentral_maxmind_license_key").val(),t=n("#maxmind-status");e.width(e.width()),e.html('<span class="spinner is-active" style="float:none;"></span>'),e.prop("disabled",!0),n.ajax({url:ajaxurl,type:"POST",data:{action:"linkcentral_verify_maxmind_license",nonce:linkcentral_settings.maxmind_nonce,license_key:i},success:function(n){n.success?(t.html('<span class="success-dark"><span class="dashicons dashicons-yes-alt success"></span> '+n.data.message).show(),e.hide()):t.html('<span class="dashicons dashicons-warning error"></span> '+n.data.message).show()},error:function(){t.html('<span class="dashicons dashicons-warning error"></span> Error occurred during verification.').show()},complete:function(){e.html(a),e.prop("disabled",!1),n("#linkcentral_geolocation_service").trigger("change")}})}))}))})();