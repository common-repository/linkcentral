(()=>{"use strict";var t,e={800:(t,e,n)=>{var a=n(686),i=n.n(a);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,s(a.key),a)}}function s(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}const c=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.chart=null,this.selectedLinkId=null,this.selectedLinkTitle=null,this.trackUniqueVisitors="1"===linkcentral_insights_data.track_unique_visitors},e=[{key:"init",value:function(){this.initChart(),this.setupEventListeners(),this.loadStats(7),this.updateAllLinksButtonState(!0)}},{key:"initChart",value:function(){var t={chart:{type:"area",height:300,toolbar:{show:!0},zoom:{type:"x",enabled:!1}},series:[{name:"Total Clicks",data:[]}],xaxis:{type:"datetime",tooltip:{enabled:!1},labels:{datetimeUTC:!1}},yaxis:{title:{text:"Clicks"},min:0},dataLabels:{enabled:!0,formatter:function(t){return t},style:{fontSize:"11px",fontWeight:"bold"}},stroke:{curve:"smooth",width:3},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},colors:["#12668A"],tooltip:{x:{format:"dd MMM yyyy"}}};this.trackUniqueVisitors&&(t.series.push({name:"Unique Clicks",data:[]}),t.colors.push("rgb(255, 205, 86)")),this.chart=new(i())(document.querySelector("#linkcentral-total-clicks-chart"),t),this.chart.render()}},{key:"setupEventListeners",value:function(){var t=this;jQuery("#linkcentral-timeframe").on("change",(function(e){return t.handleTimeframeChange(e)})),jQuery("#linkcentral-apply-custom").on("click",(function(){return t.handleCustomDateApply()})),jQuery("#linkcentral-all-links").on("click",(function(e){e.preventDefault(),t.resetToAllLinks()})),"1"===linkcentral_insights_data.can_use_premium_code__premium_only&&jQuery("#linkcentral-link-search").autocomplete({source:this.searchLinks.bind(this),minLength:2,select:function(e,n){return t.handleLinkSelect(e,n)}})}},{key:"searchLinks",value:function(t,e){jQuery.ajax({url:linkcentral_admin.ajax_url,type:"POST",dataType:"json",data:{action:"linkcentral_insights_search_links",nonce:linkcentral_admin.nonce,search:t.term},success:function(t){if(t.success){var n=t.data.map((function(t){return{label:t.title+" ("+t.slug+")",value:t.id,title:t.title}}));e(n)}else console.error("Error searching links:",t.data),e([])},error:function(t,n,a){console.error("AJAX error:",n,a),e([])}})}},{key:"handleLinkSelect",value:function(t,e){this.selectedLinkId=e.item.value,this.selectedLinkTitle=e.item.title,jQuery("#linkcentral-link-search").val(this.selectedLinkTitle);var n=jQuery("#linkcentral-timeframe").val();return this.loadSpecificLinkStats(this.selectedLinkId,n),this.updateAllLinksButtonState(!1),!1}},{key:"resetToAllLinks",value:function(){this.selectedLinkId=null,this.selectedLinkTitle=null,jQuery("#linkcentral-link-search").val("");var t=jQuery("#linkcentral-timeframe").val();this.loadStats(t),this.updateAllLinksButtonState(!0)}},{key:"updateAllLinksButtonState",value:function(t){var e=jQuery("#linkcentral-all-links");t?e.addClass("selected"):e.removeClass("selected")}},{key:"handleTimeframeChange",value:function(t){var e=t.target.value;"custom"===e?jQuery("#linkcentral-custom-range").show():(jQuery("#linkcentral-custom-range").hide(),this.selectedLinkId&&"all"!==this.selectedLinkId?this.loadSpecificLinkStats(this.selectedLinkId,e):this.loadStats(e))}},{key:"handleCustomDateApply",value:function(){var t=jQuery("#linkcentral-date-from").val(),e=jQuery("#linkcentral-date-to").val();t&&e&&(this.selectedLinkId&&"all"!==this.selectedLinkId?this.loadSpecificLinkStats(this.selectedLinkId,"custom",t,e):this.loadStats("custom",t,e))}},{key:"loadStats",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;jQuery.ajax({url:linkcentral_admin.ajax_url,type:"POST",data:{action:"linkcentral_get_stats",nonce:linkcentral_admin.nonce,days:t,start_date:n,end_date:a},success:function(t){t.success&&(e.updateChart(t.data),e.updateAllLinksButtonState(!0))}})}},{key:"loadSpecificLinkStats",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;jQuery.ajax({url:linkcentral_admin.ajax_url,type:"POST",data:{action:"linkcentral_get_specific_link_stats",nonce:linkcentral_admin.nonce,link_id:t,days:e,start_date:a,end_date:i},success:function(t){t.success&&(n.updateChart(t.data),n.updateAllLinksButtonState(!1))}})}},{key:"updateChart",value:function(t){if(t&&t.labels&&t.clicks){var e=[{name:"Total Clicks",data:t.labels.map((function(e,n){return[new Date(e).getTime(),t.clicks[n]]}))}];if(this.trackUniqueVisitors&&t.unique_clicks){var n=t.labels.map((function(e,n){return[new Date(e).getTime(),t.unique_clicks[n]]}));e.push({name:"Unique Clicks",data:n})}this.chart.updateOptions({series:e,xaxis:{type:"datetime",categories:t.labels}})}}}],e&&r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,d(a.key),a)}}function d(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}const p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentPage=1,this.totalPages=1,this.totalItems=0,this.itemsPerPage=10,this.trackUniqueVisitors="1"===linkcentral_insights_data.track_unique_visitors},e=[{key:"init",value:function(){this.loadTopLinks("7"),this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var t=this;jQuery("#linkcentral-top-links-timeframe").on("change",(function(e){return t.handleTimeframeChange(e)})),jQuery("#linkcentral-top-links-table").next(".tablenav").on("click",".first-page",(function(e){return t.handlePagination(e,1)})),jQuery("#linkcentral-top-links-table").next(".tablenav").on("click",".prev-page",(function(e){return t.handlePagination(e,t.currentPage-1)})),jQuery("#linkcentral-top-links-table").next(".tablenav").on("click",".next-page",(function(e){return t.handlePagination(e,t.currentPage+1)})),jQuery("#linkcentral-top-links-table").next(".tablenav").on("click",".last-page",(function(e){return t.handlePagination(e,t.totalPages)})),jQuery("#top-links-current-page").on("keydown",(function(e){return t.handlePageInput(e)}))}},{key:"handleTimeframeChange",value:function(t){this.loadTopLinks(t.target.value)}},{key:"handlePagination",value:function(t,e){t.preventDefault(),e>=1&&e<=this.totalPages&&e!==this.currentPage&&this.loadTopLinks(jQuery("#linkcentral-top-links-timeframe").val(),e)}},{key:"handlePageInput",value:function(t){if(13===t.keyCode){t.preventDefault();var e=parseInt(t.target.value);e>0&&e<=this.totalPages&&this.loadTopLinks(jQuery("#linkcentral-top-links-timeframe").val(),e)}}},{key:"loadTopLinks",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;jQuery.ajax({url:linkcentral_admin.ajax_url,type:"POST",data:{action:"linkcentral_get_top_links",nonce:linkcentral_admin.nonce,timeframe:t,page:n},success:function(t){t.success?e.updateTopLinksTable(t.data):console.error("Error loading top links:",t.data)},error:function(t,e,n){console.error("AJAX error:",e,n)}})}},{key:"updateTopLinksTable",value:function(t){var e=this,n=jQuery("#linkcentral-top-links-table tbody");n.empty(),t.links.forEach((function(t){var a=t.is_deleted?"linkcentral-deleted-link":t.is_trashed?"linkcentral-trashed-link":"",i=t.is_deleted?' <span class="dashicons dashicons-no" title="This link has been deleted"></span>':"",l=t.is_trashed?' <span class="dashicons dashicons-trash" title="This link is in the trash"></span>':"",r=t.has_dynamic_rules?' <span class="dashicons dashicons-randomize" title="Dynamic redirects enabled"></span>':"",s="";e.trackUniqueVisitors&&(s='<td class="column-unique-clicks">'.concat(t.unique_clicks,"</td>"));var c='\n                <tr class="'.concat(a,'">\n                    <td class="column-title">\n                        ').concat(t.is_deleted?"Deleted Link":'<a href="'.concat(t.edit_link,'">').concat(t.post_title,"</a>"),"\n                        ").concat(i).concat(l,'\n                    </td>\n                    <td class="column-slug">').concat(t.is_deleted?"":"/"+t.slug,'</td>\n                    <td class="column-destination_url">').concat(t.is_deleted?"":t.destination_url).concat(r,'</td>\n                    <td class="column-total-clicks">').concat(t.total_clicks,"</td>\n                    ").concat(s,"\n                </tr>\n            ");n.append(c)})),this.updatePagination(t)}},{key:"updatePagination",value:function(t){this.currentPage=t.current_page,this.totalPages=t.total_pages,this.totalItems=t.total_items;var e=jQuery("#linkcentral-top-links-table").next(".tablenav").find(".tablenav-pages"),n=(this.currentPage-1)*this.itemsPerPage+1,a=Math.min(this.currentPage*this.itemsPerPage,this.totalItems);e.find(".displaying-num").text(this.totalItems>0?"".concat(this.totalItems," items"):"No items"),e.find(".total-pages").text(this.totalPages),e.find("#top-links-current-page").val(this.currentPage),e.find(".tablenav-paging-text").text(" of ".concat(this.totalPages)),e.find(".first-page, .prev-page").toggleClass("disabled",1===this.currentPage),e.find(".last-page, .next-page").toggleClass("disabled",this.currentPage===this.totalPages),this.totalItems>0?e.find(".tablenav-paging-text").text("".concat(n,"-").concat(a," of ").concat(this.totalItems)):e.find(".tablenav-paging-text").text("0 items")}}],e&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function f(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,h(a.key),a)}}function h(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}const g=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentPage=1,this.totalPages=1,this.trackUserAgent=linkcentral_admin.track_user_agent},e=[{key:"init",value:function(){"undefined"!=typeof linkcentral_initial_recent_clicks_data?(this.updateRecentClicksTable(linkcentral_initial_recent_clicks_data),this.initializeRecentClicksPagination(linkcentral_initial_recent_clicks_data)):this.loadRecentClicks(),this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var t=this,e=jQuery("#linkcentral-recent-clicks-table").next(".tablenav");e.on("click",".first-page",(function(e){return t.handlePagination(e,1)})),e.on("click",".prev-page",(function(e){return t.handlePagination(e,t.currentPage-1)})),e.on("click",".next-page",(function(e){return t.handlePagination(e,t.currentPage+1)})),e.on("click",".last-page",(function(e){return t.handlePagination(e,t.totalPages)})),jQuery("#recent-clicks-current-page").on("keydown",(function(e){return t.handlePageInput(e)}))}},{key:"handlePagination",value:function(t,e){t.preventDefault(),this.loadRecentClicks(e)}},{key:"handlePageInput",value:function(t){if(13===t.keyCode){t.preventDefault();var e=parseInt(t.target.value);e>0&&e<=this.totalPages&&this.loadRecentClicks(e)}}},{key:"loadRecentClicks",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;jQuery.ajax({url:linkcentral_admin.ajax_url,type:"POST",data:{action:"linkcentral_get_recent_clicks",nonce:linkcentral_admin.nonce,page:e},success:function(e){e.success&&t.updateRecentClicksTable(e.data)}})}},{key:"updateRecentClicksTable",value:function(t){var e=this,n=jQuery("#linkcentral-recent-clicks-table tbody");n.empty(),t.clicks.forEach((function(t){var a="";e.trackUserAgent&&(a=t.user_agent_info.browser&&t.user_agent_info.device?'\n                        <td class="column-user-agent">\n                            <span class="browser-icon browser-'.concat(t.user_agent_info.browser.toLowerCase(),'" title="').concat(t.user_agent_info.browser,'"></span>\n                            <span class="dashicons ').concat(t.user_agent_info.device_icon,'" title="').concat(t.user_agent_info.device,'"></span>\n                            <span class="os-info">').concat(t.user_agent_info.os,"</span>\n                        </td>\n                    "):'<td class="column-user-agent">-</td>');var i=t.is_deleted?' <span class="dashicons dashicons-no" title="This link has been deleted"></span>':"",l=t.is_trashed?' <span class="dashicons dashicons-trash" title="This link is in the trash"></span>':"",r=t.is_deleted?"linkcentral-deleted-link":t.is_trashed?"linkcentral-trashed-link":"",s=t.is_deleted?"Deleted Link":'<a href="'.concat(t.edit_link,'">').concat(t.post_title,"</a>"),c=t.is_deleted?"":"/"+t.slug,o=t.is_deleted?"":t.referring_url,u=t.destination_url;n.append('\n                <tr class="'.concat(r,'">\n                    <td class="column-title">').concat(s).concat(i).concat(l,'</td>\n                    <td class="column-slug">').concat(c,'</td>\n                    <td class="column-referring_url">').concat(o,'</td>\n                    <td class="column-destination_url">').concat(u,"</td>\n                    ").concat(e.trackUserAgent?a:"",'\n                    <td class="column-timestamp">').concat(t.formatted_date,"</td>\n                </tr>\n            "))})),this.updateRecentClicksPagination(t)}},{key:"updateRecentClicksPagination",value:function(t){var e=jQuery("#linkcentral-recent-clicks-table").next(".tablenav").find(".tablenav-pages");e.find(".total-pages").text(t.total_pages),e.find("#recent-clicks-current-page").val(t.current_page);var n=(t.current_page-1)*t.items_per_page+1,a=Math.min(t.current_page*t.items_per_page,t.total_items);e.find(".displaying-num").text("".concat(n,"-").concat(a," of ").concat(t.total_items," items")),e.find(".first-page, .prev-page").toggleClass("disabled",t.current_page<=1),e.find(".next-page, .last-page").toggleClass("disabled",t.current_page>=t.total_pages),this.currentPage=t.current_page,this.totalPages=t.total_pages}},{key:"initializeRecentClicksPagination",value:function(t){this.updateRecentClicksPagination(t)}}],e&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();document.addEventListener("DOMContentLoaded",(function(){var t=new c,e=new p,n=new g;t.init(),e.init(),n.init()}))}},n={};function a(t){var i=n[t];if(void 0!==i)return i.exports;var l=n[t]={exports:{}};return e[t].call(l.exports,l,l.exports,a),l.exports}a.m=e,t=[],a.O=(e,n,i,l)=>{if(!n){var r=1/0;for(u=0;u<t.length;u++){for(var[n,i,l]=t[u],s=!0,c=0;c<n.length;c++)(!1&l||r>=l)&&Object.keys(a.O).every((t=>a.O[t](n[c])))?n.splice(c--,1):(s=!1,l<r&&(r=l));if(s){t.splice(u--,1);var o=i();void 0!==o&&(e=o)}}return e}l=l||0;for(var u=t.length;u>0&&t[u-1][2]>l;u--)t[u]=t[u-1];t[u]=[n,i,l]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={866:0};a.O.j=e=>0===t[e];var e=(e,n)=>{var i,l,[r,s,c]=n,o=0;if(r.some((e=>0!==t[e]))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(c)var u=c(a)}for(e&&e(n);o<r.length;o++)l=r[o],a.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return a.O(u)},n=self.webpackChunklinkcentral=self.webpackChunklinkcentral||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var i=a.O(void 0,[83],(()=>a(800)));i=a.O(i)})();